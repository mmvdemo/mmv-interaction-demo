<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Fisheye</title>
        <style>
        .slidecontainer {
            width: 40%;
        }
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 25px;
            background: #d3d3d3;
            outline: none;
            opacity: 0.7;
            -webkit-transition: .2s;
            transition: opacity .2s;
        }

        .slider:hover {
            opacity: 1;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            background: #4CAF50;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            background: #4CAF50;
            cursor: pointer;
        }
        </style>
    </head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.3/pixi.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js"></script>
    <script src="https://d3js.org/d3-color.v1.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <body>
        <div class="slidecontainer">
            <p>focal scale: <span id="focal_scale_text"></span></p> 
            <input type="range" min="1" max="90" value="3" class="slider" id="focal_scale">
            <p>focal range: <span id="focal_range_text"></span></p> 
            <input type="range" min="1" max="11" value="1" class="slider" id="focal_range">
            <p>distortion range: <span id="distort_range_text"></span></p> 
            <input type="range" min="1" max="151" value="15" class="slider" id="distort_range">
        </div>
        <canvas id="mycanvas" />
        <script type="text/javascript">
        //load data
        const timeStart = Number("<%= timeStart%>");
        const timeEnd= Number("<%= timeEnd%>");
        //let json = <%- data%>;
        //const data = {};
        //for(let t=timeStart;t<=timeEnd;t++) {
        //    data[`${t}`] = JSON.parse(json[`${t}`]);
        //}
        //const destinations = [];
        //for(let i=0;i<data[timeEnd].length;i++) {
        //    destinations.push(data[timeEnd][i]['Destinations']);
        //}
        //const nodeCnt = destinations.length;
        ////normalize data
        //let maxValue = 0;
        //for(let i=0;i<data[timeEnd].length;i++) {
        //    for(let j=0;j<destinations.length;j++) {
        //        let value = data[timeEnd][i][destinations[j]];
        //        if(value.length>0) {
        //            if(maxValue<Number(value)) {
        //                maxValue = Number(value);
        //            }
        //        }
        //    }
        //}
        //maxValue /=8;
        
        </script>
        <script src="fisheye/src/fisheye.js"></script>
        
    </body>
</html>
